<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kelola Produk</title>
    <link href="./../../../../dist/styles.css" rel="stylesheet" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/your-kit-id.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body class="bg-gray-100">
    <!-- Container utama -->
    <div class="flex h-screen">
      <!-- Sidebar -->
      <aside
        class="w-64 bg-gray-800 text-white fixed top-0 left-0 h-full overflow-y-auto"
      >
        <div
          class="p-4 text-center text-2xl font-bold border-b border-gray-700"
        >
          Admin Dashboard
        </div>
        <nav class="mt-4">
          <a
            href="./../dashboard/index.html"
            class="block px-4 py-2 text-gray-400 hover:bg-gray-700 hover:text-zinc-50 focus:bg-gray-700"
            ><i class="fa-solid fa-house" style="color: #ffffffa7"></i>
            Dashboard</a
          >
          <a
            href="#"
            class="block px-4 py-2 text-gray-400 hover:bg-gray-700 hover:text-zinc-50 focus:bg-gray-700 active_sidebar"
          >
            <i class="fa-solid fa-shirt" style="color: #ffffffa7"></i> Kelola
            Produk</a
          >
          <a
            href="#"
            class="block px-4 py-2 text-gray-400 hover:bg-gray-700 hover:text-zinc-50 focus:bg-gray-700"
            ><i
              class="fa-solid fa-money-bill-wave"
              style="color: #ffffffa7"
            ></i>
            Kelola Transaksi</a
          >
          <a
            href="#"
            class="block px-4 py-2 text-gray-400 hover:bg-gray-700 hover:text-zinc-50 focus:bg-gray-700"
            ><i class="fa-solid fa-credit-card" style="color: #ffffffa7"></i>
            Metode Pembayaran</a
          >
        </nav>
      </aside>

      <!-- Konten utama -->
      <main class="flex-1 ml-64 p-6 overflow-y-auto">
        <h1 class="text-2xl font-bold text-gray-800 mb-6">Kelola Produk</h1>

        <!-- Tombol Tambah Produk -->
        <button
          id="openModal"
          class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mb-6"
        >
          Tambah Produk
        </button>

        <!-- Modal -->
        <div
          id="modal"
          class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden"
        >
          <div class="bg-white p-6 rounded-lg shadow-lg w-96">
            <h2 class="text-xl font-semibold mb-4">Tambah Produk</h2>
            <form id="productForm" class="space-y-4">
              <div>
                <label class="block text-sm font-medium text-gray-700"
                  >Gambar Produk</label
                >
                <input
                  id="productImage"
                  type="url"
                  class="w-full border border-gray-300 rounded px-3 py-2"
                  placeholder="URL Gambar Produk"
                  required
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700"
                  >Nama Produk</label
                >
                <input
                  id="productName"
                  type="text"
                  class="w-full border border-gray-300 rounded px-3 py-2"
                  placeholder="Nama Produk"
                  required
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700"
                  >Deskripsi Produk</label
                >
                <textarea
                  id="productDescription"
                  class="w-full border border-gray-300 rounded px-3 py-2"
                  placeholder="Deskripsi Produk"
                  required
                ></textarea>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700"
                  >Harga</label
                >
                <input
                  id="productPrice"
                  type="number"
                  class="w-full border border-gray-300 rounded px-3 py-2"
                  placeholder="Harga"
                  required
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700"
                  >Stok</label
                >
                <input
                  id="productStock"
                  type="number"
                  class="w-full border border-gray-300 rounded px-3 py-2"
                  placeholder="Stok"
                  required
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700"
                  >Ukuran</label
                >
                <input
                  id="productSize"
                  type="text"
                  class="w-full border border-gray-300 rounded px-3 py-2"
                  placeholder="Ukuran Produk (S, M, L, XL)"
                  required
                />
              </div>
              <div class="flex justify-end space-x-4">
                <button
                  type="button"
                  id="closeModal"
                  class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"
                >
                  Batal
                </button>
                <button
                  type="submit"
                  class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
                >
                  Simpan
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Daftar Produk -->
        <div id="productList" class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <!-- Card Produk akan muncul di sini -->
        </div>
      </main>
    </div>

    <script>
      // Modal handling
      const modal = document.getElementById("modal");
      const openModal = document.getElementById("openModal");
      const closeModal = document.getElementById("closeModal");

      openModal.addEventListener("click", () => {
        modal.classList.remove("hidden");
      });

      closeModal.addEventListener("click", () => {
        modal.classList.add("hidden");
      });

      // Data produk
      let products = [];

      // Referensi elemen
      const productForm = document.getElementById("productForm");
      const productList = document.getElementById("productList");

      // Fungsi render daftar produk
      function renderProducts() {
        productList.innerHTML = ""; // Reset tampilan
        products.forEach((product, index) => {
          const productCard = document.createElement("div");
          productCard.className = "bg-white p-4 rounded-lg shadow-md";

          productCard.innerHTML = `
          <img src="${product.image}" alt="${
            product.name
          }" class="w-full h-40 object-cover rounded mb-4">
          <h3 class="text-lg font-semibold text-gray-700">${product.name}</h3>
          <p class="text-sm text-gray-500 mb-2">${product.description}</p>
          <p class="text-gray-500">Harga: Rp${product.price.toLocaleString()}</p>
          <p class="text-gray-500">Stok: ${product.stock}</p>
          <p class="text-gray-500">Ukuran: ${product.size}</p>
          <div class="mt-4 space-x-2">
            <button class="bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600" onclick="editProduct(${index})">Edit</button>
            <button class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600" onclick="deleteProduct(${index})">Hapus</button>
          </div>
        `;
          productList.appendChild(productCard);
        });
      }

      // Tambah produk baru
      productForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const image = document.getElementById("productImage").value;
        const name = document.getElementById("productName").value;
        const description = document.getElementById("productDescription").value;
        const price = parseFloat(document.getElementById("productPrice").value);
        const stock = parseInt(document.getElementById("productStock").value);
        const size = document.getElementById("productSize").value;

        products.push({ image, name, description, price, stock, size });
        renderProducts();
        modal.classList.add("hidden"); // Tutup modal
        productForm.reset(); // Reset form
      });

      // Hapus produk
      function deleteProduct(index) {
        products.splice(index, 1);
        renderProducts();
      }

      // Edit produk
      function editProduct(index) {
        const product = products[index];
        const image = prompt("URL Gambar Produk:", product.image);
        const name = prompt("Nama Produk:", product.name);
        const description = prompt("Deskripsi Produk:", product.description);
        const price = prompt("Harga Produk:", product.price);
        const stock = prompt("Stok Produk:", product.stock);
        const size = prompt("Ukuran Produk:", product.size);

        if (image && name && description && price && stock && size) {
          products[index] = {
            image,
            name,
            description,
            price: parseFloat(price),
            stock: parseInt(stock),
            size,
          };
          renderProducts();
        }
      }

      // Inisialisasi awal
      renderProducts();
    </script>
  </body>
</html>
